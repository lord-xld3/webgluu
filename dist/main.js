(()=>{"use strict";(()=>{var t=function(){function t(t){this.canvas=t;var n=t.getContext("webgl2");if(!n)throw new Error("WebGL2 is not supported");this.gl=n}return t.prototype.getCanvas=function(){return this.canvas},t.prototype.getGL=function(){return this.gl},t.prototype.resize=function(t,n,r,e){void 0===t&&(t=this.canvas.clientWidth),void 0===n&&(n=this.canvas.clientHeight),void 0===r&&(r=0),void 0===e&&(e=0),this.canvas.width=t,this.canvas.height=n,this.gl.viewport(r,e,t,n)},t}();function n(t,n,r){var e=t.createShader(r);if(t.shaderSource(e,n),t.compileShader(e),!t.getShaderParameter(e,t.COMPILE_STATUS))throw new Error("Failed to compile shader: ".concat(t.getShaderInfoLog(e)));return e}var r,e=function(){function t(t,n,r){var e=t.getGL();this.gl=e,this.vao=e.createVertexArray(),this.bind(),n.bind(),null==r||r.bind(),this.unbind(),null==r||r.unbind()}return t.prototype.bind=function(){this.gl.bindVertexArray(this.vao),this.gl.enableVertexAttribArray(0)},t.prototype.unbind=function(){this.gl.bindVertexArray(null)},t}(),i=(r=function(t,n){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},r(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function e(){this.constructor=t}r(t,n),t.prototype=null===n?Object.create(n):(e.prototype=n.prototype,new e)}),o=function(){return o=Object.assign||function(t){for(var n,r=1,e=arguments.length;r<e;r++)for(var i in n=arguments[r])Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i]);return t},o.apply(this,arguments)},a=function(){function t(t,n,r){if(void 0===r&&(r=t.getGL().STATIC_DRAW),this.gl=t.getGL(),this.buf=this.gl.createBuffer(),!this.buf)throw new Error("".concat(this," Failed to create BufferObject using context: ").concat(this.gl));this.target=n,this.usage=r}return t.prototype.bind=function(){this.gl.bindBuffer(this.target,this.buf)},t.prototype.unbind=function(){this.gl.bindBuffer(this.target,null)},t.prototype.setBuffer=function(t){this.gl.bufferData(this.target,t,this.usage)},t.prototype.setSubBuffer=function(t,n,r,e){void 0===n&&(n=0),void 0===r&&(r=0),void 0===e&&(e=t.byteLength),this.gl.bufferSubData(this.target,n,t,r,e)},t}(),c=(function(t){function n(r,e,i){var o=t.call(this,r,n.target,i)||this;return o.bind(),o.setBuffer(e),o}i(n,t),n.target=WebGL2RenderingContext.ELEMENT_ARRAY_BUFFER}(a),function(t){function n(r,e,i,a,c){var u=t.call(this,r,n.target,c)||this;return u.ptrs=a.map((function(t){var n,r,i,a,c=u.gl.getAttribLocation(e,t.attribute);if(-1===c)throw new Error('Attribute "'.concat(t.attribute,'" not found in program: ').concat(e));return o(o({index:c},t),{type:null!==(n=t.type)&&void 0!==n?n:u.gl.FLOAT,normalized:null!==(r=t.normalized)&&void 0!==r&&r,stride:null!==(i=t.stride)&&void 0!==i?i:0,offset:null!==(a=t.offset)&&void 0!==a?a:0})})),u.bind(),u.setBuffer(i),u}return i(n,t),n.prototype.bind=function(){var n=this;t.prototype.bind.call(this),this.ptrs.forEach((function(t){n.gl.vertexAttribPointer(t.index,t.size,t.type,t.normalized,t.stride,t.offset)}))},n.prototype.modifyAttribute=function(t,n){var r=this.ptrs.find((function(n){return n.attribute===t}));if(!r)throw new Error('Attribute "'.concat(t,'" not found in VBO: ').concat(this,"."));void 0!==n&&(n?this.gl.enableVertexAttribArray(r.index):this.gl.disableVertexAttribArray(r.index))},n.target=WebGL2RenderingContext.ARRAY_BUFFER,n}(a)),u=(function(t){function n(r,e,i,o,a,c){var u=t.call(this,r,n.target,c)||this;if(u.blockIndex=u.gl.getUniformBlockIndex(e,i),u.blockIndex===u.gl.INVALID_INDEX)throw new Error('Uniform block "'.concat(i,'" not found in program: ').concat(e));return u.bind(),u.setBuffer(o),u.gl.uniformBlockBinding(e,u.blockIndex,a),u}i(n,t),n.prototype.bind=function(){t.prototype.bind.call(this),this.gl.bindBufferBase(n.target,this.blockIndex,this.buf)},n.prototype.unbind=function(){this.gl.bindBufferBase(n.target,this.blockIndex,null),t.prototype.unbind.call(this)},n.prototype.setBuffer=function(n){var r=n.byteLength+15&-16,e=new n.constructor(r);e.set(n),t.prototype.setBuffer.call(this,e)},n.target=WebGL2RenderingContext.UNIFORM_BUFFER}(a),new t(document.getElementById("canvas"))),s=u.getGL(),f=function(t,r){var e=t.getGL();return r.map((function(t){var r=t.vert,i=t.frag,o=n(e,r,e.VERTEX_SHADER),a=n(e,i,e.FRAGMENT_SHADER);return function(t,n,r){var e=t.createProgram();if(t.attachShader(e,n),t.attachShader(e,r),t.linkProgram(e),!t.getProgramParameter(e,t.LINK_STATUS))throw new Error("Failed to link program: ".concat(t.getProgramInfoLog(e)));return e}(e,o,a)}))}(u,[{vert:"#version 300 es\n        in vec2 position;\n        void main() {\n            gl_Position = vec4(position, 0, 1);\n        }",frag:"#version 300 es\n        precision mediump float;\n        out vec4 color;\n        void main() {\n            color = vec4(1, 0, 0, 1);\n        }"}])[0],l=new e(u,new c(u,f,new Float32Array([-.5,-.5,.5,-.5,0,.5]),[{attribute:"position",size:2}]));s.clearColor(0,0,0,1),s.clear(s.COLOR_BUFFER_BIT),s.useProgram(f),l.bind(),s.drawArrays(s.TRIANGLES,0,3)})()})();